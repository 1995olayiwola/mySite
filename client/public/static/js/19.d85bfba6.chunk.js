(this.webpackJsonpclient2=this.webpackJsonpclient2||[]).push([[19],{1017:function(e,t,n){"use strict";n.r(t);var c=n(64),r=n.n(c),a=n(100),s=n(16),i=n(46),o=n(22),l=n(1),d=n(0),j=n.n(d),u=n(28),h=n.n(u),b=n(153),O=n.n(b),x=n(83),p=n(154),g=n(155),f=n.n(g),w=n(952),m=n(953);function v(e){var t=e.page_rw,n=e.startRow_rw,c=e.SetPage_rw,r=e.SetStartRow_rw,a=e.max,s=e.Total_row,i=e.Total_pages,o=e.url,d=e.history;return Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{children:["Records ",n+1," to ",Math.min(n+a,s)," of ",s]}),Object(l.jsx)("table",{border:"0",align:"center",width:"50%",cellPadding:"5",children:Object(l.jsx)("tbody",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsx)("span",{style:{cursor:"pointer"},onClick:function(){c(0),r(0),d.push("".concat(o,"/0"))},children:" First"})}),Object(l.jsx)("td",{children:Object(l.jsx)("span",{style:{cursor:"pointer"},onClick:function(){var e=Math.max(0,t-1),n=e*a;c(e),r(n),d.push("".concat(o,"/").concat(e))},children:"Previous"})}),Object(l.jsx)("td",{children:Object(l.jsx)("span",{onClick:function(){var e=Math.min(t+1,i),n=e*a;c(e),r(n),d.push("".concat(o,"/").concat(e))},style:{cursor:"pointer"},children:"Next"})}),Object(l.jsx)("td",{children:Object(l.jsx)("span",{onClick:function(){var e=i*a;c(i),r(e),d.push("".concat(o,"/").concat(i))},style:{cursor:"pointer"},children:"Last"})})]})})})]})}t.default=function(e){console.log("props is",e);var t=j.a.useState({results:[],count:0}),n=Object(s.a)(t,2),c=n[0],d=n[1],u=e.history,b=j.a.useState(null),g=Object(s.a)(b,2),y=g[0],S=g[1],_=j.a.useState(null),k=Object(s.a)(_,2),C=(k[0],k[1],j.a.useState({location:null,keyword:""})),R=Object(s.a)(C,2),P=R[0],T=R[1],M=e.match.params.pageId||0,N=5*M,F=j.a.useState(M),L=Object(s.a)(F,2),W=L[0],A=L[1],E=j.a.useState(N),J=Object(s.a)(E,2),Q=J[0],B=J[1],G=c&&c.count||0,H=Math.ceil(G/5)-1,I=y&&y.lat,K=y&&y.lng,U=null;return I&&K&&(U=new h.a.GeoPoint({latitude:I,longitude:K})),j.a.useEffect((function(){(function(){var e=Object(a.a)(r.a.mark((function e(){var t,n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null,null,t=null,n=new h.a.Query("Bluetooth"),t?n.withinMiles("location_geo",t,1e4,!0):n.descending("createdAt"),n.skip(Q),n.limit(5),n.withCount(),e.next=11,n.find();case 11:return c=e.sent,e.next=14,d(c);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[Q,I,K]),console.log("data is:",c),Object(l.jsx)("div",{children:Object(l.jsxs)("div",{className:"row",style:{marginTop:"10px",marginLeft:"10px",marginRight:"10px",justifyContent:"center",flexWrap:"wrap"},children:[Object(l.jsxs)("div",{className:"col-12",children:[Object(l.jsx)("h3",{children:"Search Records"}),Object(l.jsx)(x.a,{title:"Enter the  address",value:P.location&&P.location.formatted_address||"",onHandleSelect:function(e,t){T((function(n){return Object(o.a)(Object(o.a)({},n),{},Object(i.a)({},e,t))}))}.bind(undefined,"location"),options:""}),Object(l.jsx)(p.a,{name:"keyword",title:"Keyword",placeholder:" Search for keywords",value:P.keyword,handleChange:function(e){e.persist(),T((function(t){return Object(o.a)(Object(o.a)({},t),{},Object(i.a)({},e.target.name,e.target.value))}))}.bind("")}),Object(l.jsx)(w.a,{type:"button",variant:"primary",onClick:function(){S(P.location)},children:"Search"})]}),Object(l.jsx)("div",{className:"col-12",children:c.results.length>0&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)(m.a,{striped:!0,bordered:!0,hover:!0,children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"Username"}),Object(l.jsx)("th",{children:"Phone number"}),Object(l.jsx)("th",{children:"Quantity"}),Object(l.jsx)("th",{children:"Location"})]})}),Object(l.jsx)("tbody",{children:c.results.map((function(e){var t=e.get("categories"),n=t&&t.label,c=null;return U&&(c=e.get("location_geo").milesTo(U).toFixed(2)),Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:e.get("username")}),Object(l.jsx)("td",{children:e.get("number")}),Object(l.jsx)("td",{children:n}),Object(l.jsx)("td",{children:f()(e.get("content"))}),Object(l.jsxs)("td",{children:[Object(l.jsx)("div",{children:e.get("location").formatted_address}),Object(l.jsx)("div",{style:{fontWeight:"bold"},children:O()(e.get("createdAt")).fromNow()}),c&&Object(l.jsxs)("div",{style:{fontWeight:"bold"},children:[c," miles"]})]})]},e.id)}))})]}),Object(l.jsx)(v,{page_rw:W,startRow_rw:Q,SetPage_rw:A,SetStartRow_rw:B,max:5,Total_row:G,Total_pages:H,url:"/page",history:u})]})})]})})}}}]);
//# sourceMappingURL=19.d85bfba6.chunk.js.map